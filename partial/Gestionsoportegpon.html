<style>
  .fileUpload {
    position: relative;
    overflow: hidden;
    margin: 10px;
  }

  table,
  th,
  td {
    font-size: 11px;
  }

  .fixed-panel-kpiuser {
    max-height: 300px;
    overflow-y: scroll;
  }

  .fileUpload input.upload {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    padding: 0;
    font-size: 30px;
    cursor: pointer;
    opacity: 0;
    filter: alpha(opacity=0);
  }

  .flipswitch {
    position: relative;
    background: white;
    margin: 0px 0 0;
    padding: 0;
    width: 42px;
    height: 22px;
    -webkit-appearance: initial;
    border-radius: 3px;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    outline: none;
    font-size: inherit;
    /*font-size: 65%;
        font-size: 9px;
        font-weight: bold;*/
    font-family: Trebuchet, Arial, sans-serif;
    cursor: pointer;
    border: 1px solid #ddd;
    z-index: 0;
  }

  .flipswitch:after {
    position: absolute;
    top: 5%;
    display: block;
    line-height: 17px;
    width: 45%;
    height: 90%;
    background: #337ab7;
    box-sizing: border-box;
    text-align: center;
    transition: all 0.3s ease-in 0s;
    color: white;
    border: #888 1px solid;
    border-radius: 3px;
    z-index: 0;
  }

  .flipswitch:after {
    left: 2%;
    content: "No";
  }

  .flipswitch:checked:after {
    left: 53%;
    content: "Si";
    background: #00c8ff;
  }

  .resaltado15min {
    background-color: #ade2ff !important;
  }

  .label-xsmall {
    vertical-align: super;
    font-size: x-small;
  }

  .optionTipificacion {
    display: none;
    width: 150px;
    margin: 0px auto;
    min-height: 200px;
    background-color: #ffffff;
    padding: 3px;
    box-shadow: 0 2px 5px #666666;
  }
</style>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <div id="home" class="tab-pane fade in active">
        <div class="panel panel-default">
          <div class="panel-heading nav navbar-default">
            <ul class="nav navbar-nav navbar-left">
              <b>Soporte GPON</b>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <b>
                <button type="button" class="btn btn-info btn-xs" data-toggle="modal" data-backdrop="static"
                  data-target="#infomodal" data-placement="top" data-html="true">
                  Contador
                </button>
              </b>

              <b>
                <button type="button" class="btn btn-default btn-xs" ng-click="listarsoportegpon()" title="Actualizar"
                  data-toggle="tooltip" data-placement="top" ng-disabled="loading">
                  <i class="fa fa-refresh" aria-hidden="true"></i>
                </button> </b>&nbsp;
            </ul>
          </div>
            <div class="table-responsive animated bounceInRight" ng-show="!isLoadingData">
              <table class="table small table-bordered table-hover table-condensed">
                <thead class="table-header">
                  <tr>
                    <th rowspan="2">Marcar</th>
                    <th rowspan="2">Login</th>
                    <th rowspan="2">Tarea</th>
                    <th rowspan="2">Arpon</th>
                    <th rowspan="2">Nap</th>
                    <th rowspan="2">Hilo</th>
                    <th colspan="4">Internet</th>
                    <th colspan="4">Televisión</th>
                    <th rowspan="2">Número Contacto</th>
                    <th rowspan="2">Nombre Contacto</th>
                    <th rowspan="2">Pedido</th>
                    <th rowspan="2">Categoría</th>
                    <th rowspan="2">Municipio</th>
                    <th rowspan="2">Productos</th>
                    <th rowspan="2">Datos cola</th>
                    <th rowspan="2">Serial</th>
                    <th rowspan="2">Sistema</th>
                    <th rowspan="2">MAC</th>
                    <th rowspan="2">Tipo EQ</th>
                    <th rowspan="2">Vel Nav</th>
                    <th rowspan="2">Observación</th>
                    <th rowspan="2">Tip.</th>
                    <th rowspan="2">Fecha Solicitud</th>
                    <th rowspan="2">Tipificacion</th>
                    <th rowspan="2">Acion</th>
                  </tr>
                  <tr>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="data in dataSoporteGpon">
                    <td>
                      <div ng-show="data.id_soporte">
                        <input type="checkbox" ng-model="data.bloqueo" ng-change="marcarEngestionGpon(data)"
                          name="bloqueo" id="bloqueo" ng-show="data.bloqueo != 1" />
                        <div class="loadingio-spinner-ellipsis-3nun7cb96ao" ng-show="data.bloqueo == 1">
                          <div class="ldio-pettsxrv7wj">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                          </div>
                        </div>
                      </div>
                      <div ng-show="!data.id_soporte">
                        <input type="checkbox" ng-model="data.bloqueo" name="bloqueo" id="bloqueo"
                          ng-change="marcarEngestionGpon(data)" />
                      </div>
                    </td>
                    <!-- En estas lineas se oculta el login gestión -->
                    <td ng-show="data.login == galletainfo.login">
                      <span
                        ng-class="{'label label-primary label-xsmall': data.status_soporte == 2, 'label label-primary label-xsmall': data.login == galletainfo.login}">{{data.login}}</span>
                    </td>

                    <td ng-show="data.login != galletainfo.login && data.status_soporte == 2">
                      <span
                        ng-class="{'label label-primary label-xsmall': data.status_soporte == 2, 'label label-primary label-xsmall': data.login != galletainfo.login}">{{data.login}}</span>
                    </td>

                    <td ng-show="data.login != galletainfo.login && data.status_soporte == 0">
                      <span ng-class="{'label label-primary label-xsmall': data.status_soporte == 0}"></span>
                    </td>
                    <!-- Fin ocultar el login gestión -->
                    <td>{{data.tarea}}</td>
                    <td>{{data.arpon}}</td>
                    <td>{{data.nap}}</td>
                    <td>{{data.hilo}}</td>
                    <td>
                      <span ng-if="data.port_internet_1 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>
                      <span ng-if="data.port_internet_2 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>
                      <span ng-if="data.port_internet_3 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>
                      <span ng-if="data.port_internet_4 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>
                      <span ng-if="data.port_television_1 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>
                      <span ng-if="data.port_television_2 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>
                      <span ng-if="data.port_television_3 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>
                      <span ng-if="data.port_television_4 == '1'">X</span>
                      <span ng-else></span>
                    </td>
                    <td>{{data.numero_contacto}}</td>
                    <td>{{data.nombre_contacto}}</td>
                    <td>{{data.unepedido}}</td>
                    <td>{{data.tasktypecategory}}</td>
                    <td>{{data.unemunicipio}}</td>
                    <td>{{data.uneproductos}}</td>
                    <td>{{data.datoscola}}</td>
                    <!--     <td>{{data.engineer_id}}</td>
                                         <td>{{data.engineer_name}}</td>
                                         <td>{{data.mobile_phone}}</td> -->
                    <td>{{data.serial | replace: ',':'\n'}} <br /></td>
                    <td>{{data.uneSourceSystem}} <br /></td>
                    <td>{{data.mac | replace: ',':'\n'}} <br /></td>
                    <td>{{data.tipo_equipo | replace: ',':'\n'}}</td>
                    <td>{{data.velocidad_navegacion}}</td>
                    <td>{{data.observacion_terreno}}</td>
                    <td>
                      <div class="content">
                        <button type="button" class="btn btn-default btn-xs"
                          ng-click="abreTipificacion(data.id_soporte)" title="Tipificacion" data-toggle="tooltip"
                          data-placement="top">
                          <i class="fa fa-list" aria-hidden="true"></i>
                        </button>

                        <div class="optionTipificacion" id="optionTipificacion_{{data.id_soporte}}">
                          <select ng-model="tipificacionesModel" class="btn btn-default btn-xs grupo-select" multiple
                            ui-select2="groupSetup" name="tipificaciones" id="tipificaciones_{{data.id_soporte}}"
                            style="width: 100%">
                            <option value="Actualizar Infra">
                              Actualizar Infra
                            </option>
                            <option value="Estabilizar Pon">
                              Estabilizar Pon
                            </option>
                            <option value="Configurar VLAN">
                              Configurar VLAN
                            </option>
                            <option value="Aprovisionar">Aprovisionar</option>
                            <option value="Cam_Eq">Cam_Eq</option>
                            <option value="Contingencia">Contingencia</option>
                            <option value="Red ocupada">Red ocupada</option>
                            <option value="Puertos Lan">Puertos Lan</option>
                            <option value="Cierre CBAPON">Cierre CBAPON</option>
                            <option value="Validacion general">
                              Validacion general
                            </option>
                            <option value="Nap Trocado">Nap Trocado</option>
                            <option value="Cod_Comp">Cod_Comp</option>
                            <option value="Reenvio Registros">
                              Reenvio Registros
                            </option>
                            <option value="IP navegacion">IP navegacion</option>
                          </select>
                        </div>
                      </div>
                    </td>
                    <td>{{data.fecha_solicitud_firebase}}</td>
                    <td>
                      <!-- <select ng-model="data.tipificacion" class="btn btn-default btn-xs grupo-select" name="tipificacion" style="width:100px" ng-change="palancatv(data,$index)"> -->
                      <select ng-model="data.tipificacion" class="btn btn-default btn-xs grupo-select"
                        name="tipificacion" id="tipificacion{{data.id_soporte}}" style="width: 100px">
                        <option value="">Seleccionar</option>
                        <option value="Finalizado">Finalizado</option>
                        <option value="Incompleto">Incompleto</option>
                        <option value="Devuelto al tecnico">
                          Devuelto al técnico
                        </option>
                      </select>
                    </td>
                    <td>
                      <button type="button" class="btn btn-default btn-xs"
                        ng-click="gestionarSoporteGpon(data.id_soporte, data.request_id_firebase)"
                        title="Gestionar soporte gpon" data-toggle="tooltip" data-placement="top">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <!-- Loading Circle -->
            <div class="loading-circle" ng-show="loadingData">
              <div class="loadingio-spinner-ripple">
                <div class="ldio">
                  <div></div>
                  <div></div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>

  <div ng-include="rutaCierreMasivoContin"></div>

  <div id="modalPedidoGpon" class="modal fullscreen-modal fade" role="dialog">
    <div class="modal-dialog modal-lg" style="width: 90%">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
          <h4 class="modal-title">Pedido GPON:</h4>
        </div>
        <div class="modal-body">
          <div class="panel panel-default">
            <div class="panel-heading nav navbar-default">
              <table class="table table-striped table-hover table-condensed">
                <thead class="table-header">
                  <tr>
                    <th>Pedido</th>
                    <th>Tarea</th>
                    <th>Fecha Ingreso</th>
                    <th>Tecnico</th>
                    <th>Contacto</th>
                    <th>Login Gestiona</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="data in gpon.databsucarPedido">
                    <td>{{data.unepedido}}</td>
                    <td>{{data.tarea}}</td>
                    <td>{{data.fecha_creado}}</td>
                    <td>{{data.engineer_name}}</td>
                    <td>{{data.mobile_phone}}</td>
                    <td>{{data.login}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" ng-disabled="contact_form.$invalid" class="btn btn-info" data-dismiss="modal">
            Cerrar
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="infomodal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg" style="
      width: 18%;
      float: right;
      margin-right: 30px;
      top: 200px;
    ">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
          <h4 class="modal-title">En gestion</h4>
        </div>
        <div class="modal-body">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Login Analista</th>
                <th>Cantidad Marcadas</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="data in datacount">
                <td class="filterable-cell">
                  <i class="fa fa-user" aria-hidden="true"></i> {{data.login}}
                </td>
                <td class="filterable-cell">{{data.Conteo}}</td>
              </tr>
            </tbody>
          </table>
          <div class="row">
            <h5 class="subtitulo2" style="text-align: center">
              <b>Detalles hoy</b>
            </h5>
            <ul style="
              display: flex;
              list-style: none;
              flex-direction: row;
              justify-content: center;
              align-items: center;
              padding: 0;
            ">
              <li>
                <span class="label label-success">
                  Finalizados: {{finalizado}}</span>&nbsp;&nbsp;&nbsp;
              </li>
              <li>
                <span class="label label-warning">
                  Devueltos al tecnico: {{devuelto}}</span>&nbsp;&nbsp;&nbsp;
              </li>
            </ul>
            <ul style="
              display: flex;
              list-style: none;
              flex-direction: row;
              justify-content: center;
              align-items: center;
              padding: 0;
            ">
              <li>
                <span class="label label-danger">
                  Incompletos: {{incompleto}}</span>
              </li>
              &nbsp;&nbsp;
              <li>
                <span class="label label-info">
                  Sin respuesta: {{sinrespuesta}}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" tabindex="-1" role="dialog" id="tipificacionNueva">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">Seleccione</h4>
        </div>
        <div class="modal-body">
          <select ng-model="tipificacionesModel" class="btn btn-default btn-xs grupo-select" multiple
            ui-select2="groupSetup" name="tipificaciones" id="tipificaciones{{data.id_soporte}}" style="width: 100%">
            <option value="Actualizar Infra">Actualizar Infra</option>
            <option value="Estabilizar Pon">Estabilizar Pon</option>
            <option value="Configurar VLAN">Configurar VLAN</option>
            <option value="Aprovisionar">Aprovisionar</option>
            <option value="Cam_Eq">Cam_Eq</option>
            <option value="Contingencia">Contingencia</option>
            <option value="Red ocupada">Red ocupada</option>
            <option value="Puertos Lan">Puertos Lan</option>
            <option value="Cierre CBAPON">Cierre CBAPON</option>
            <option value="Validacion general">Validacion general</option>
            <option value="Nap Trocado">Nap Trocado</option>
            <option value="Cod_Comp">Cod_Comp</option>
            <option value="Reenvio Registros">Reenvio Registros</option>
            <option value="IP navegacion">IP navegacion</option>
          </select>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">
            Cerrar
          </button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
  <div class="modal-dialog modal-lg modal fade" style="width: 25%; float: right;margin-right: 30px; top: 200px; heigth:50%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">En gestion </h4>
      </div>
      <div class="modal-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Login Analista</th>
              <th>Cantidad Marcadas</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="data in datacount">
              <td class="filterable-cell"><i class="fa fa-user" aria-hidden="true"></i> {{data.login}}</td>
              <td class="filterable-cell">{{data.Conteo}}</td>
            </tr>
          </tbody>
        </table>
        <ul style="display: flex;
                            list-style: none;
                            flex-direction: row;
                            justify-content: flex-start;
                            align-items: center;">
          <h6 class="subtitulo2">Total hoy</h6>
          <li>
            <span class="label label-success"> Finalizados: {{finalizado}}</span>&nbsp;&nbsp;&nbsp;
          </li>
          <li>
            <span class="label label-warning"> Devueltos al tecnico: {{devuelto}}</span>&nbsp;&nbsp;&nbsp;
          </li>
          <li>
            <span class="label label-danger"> Incompletos: {{incompleto}}</span>
          </li>
        </ul>
      </div>


    </div>
  </div>
</div>
<br><br><br>